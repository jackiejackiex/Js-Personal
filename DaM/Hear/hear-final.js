//hear.js

// https://p5js.org/reference/#/p5.PolySynth/play
// Dataset: https://ourworldindata.org/co2/country/united-states?country=~USA

//USA 1900-2020 
data_usa = [8.4143,8.9814,9.3288,10.6978,10.3411,11.3363,11.6635,13.2916,11.3937,12.379,13.2645,12.911,13.5663,14.3525,12.9212,13.2123,14.459,15.673,16.1623,13.4852,15.6217,12.6114,12.5353,16.3202,14.4013,14.6923,15.6973,15.1192,14.6453,15.5022,13.6188,11.4747,9.6374,10.2631,10.8515,11.1966,12.7656,13.2625,11.1359,12.1734,13.5274,14.5805,15.4896,15.7903,16.7588,15.9519,15.0525,16.3479,16.751,13.8397,16.0031,16.2774,15.6253,15.7485,14.7527,15.8916,16.3694,15.9526,15.1942,15.4078,15.5159,15.2276,15.5668,16.0378,16.5348,17.0194,17.6884,18.1715,18.6618,19.4305,20.7121,20.6508,21.4413,22.2365,21.2828,20.4401,21.4738,21.9122,21.9389,22.0303,20.9533,20.2308,19.0191,18.7653,19.5668,19.3446,19.2087,19.6915,20.4157,20.5502,20.2818,19.8709,20.1077,20.2955,20.4347,20.4459,20.9089,20.9282,20.8269,20.839,21.3357,20.7474,20.7003,20.7437,20.913,20.7954,20.324,20.3953,19.4872,17.8847,18.3676,17.7807,16.9998,17.3017,17.3306,16.7408,16.2469,16.0197,16.434,15.972,14.2379]

//Canada 1900-2020
data_canada = [3.8119,4.3168,4.5335,4.8097,5.5408,5.7654,5.9281,7.2511,7.1195,6.6434,7.3761,8.4187,9.1994,10.629,8.9877,7.875,9.6584,10.557,10.8647,9.0551,9.8512,9.2233,7.7892,10.2824,8.4085,8.034,8.8915,9.4833,9.4982,9.8693,9.2644,7.3482,6.7195,6.5785,7.4846,7.3004,7.8969,8.4755,7.6721,8.4162,9.4906,10.3388,11.0919,11.473,11.4583,10.4601,10.894,11.0944,12.0304,10.7903,11.2233,11.5551,11.0352,10.8264,10.6896,10.8125,11.7782,11.0385,10.712,10.5804,10.798,10.6395,11.1304,11.1338,12.3198,12.8346,12.9695,13.8568,14.668,14.6072,15.962,16.2169,17.2521,17.0095,17.1291,17.2073,17.0828,17.2541,17.3849,18.2805,18.1369,17.4164,16.6337,16.2223,16.7119,16.3807,15.5206,16.3048,16.9987,17.0307,16.6298,16.1247,16.4227,16.2531,16.5715,16.8341,17.211,17.5265,17.6199,17.9434,18.5218,18.1037,18.111,18.4941,18.254,17.9035,17.5618,18.058,17.3788,16.1977,16.3644,16.4993,16.301,16.2537,15.9981,15.9066,15.3799,15.5004,15.6299,15.5673,14.1969]

//United Kingdom 1900-2020
data_uk = [10.1306,9.8224,10.1122,10.1013,10.0587,10.1008,10.3701,10.7368,10.381,10.3907,10.3986,10.5909,9.9786,10.8607,10.4856,10.5768,10.91,10.7368,9.96,9.7032,9.9975,6.789,9.0979,9.6845,10.1544,9.6126,5.2777,10.0189,9.4137,9.9156,9.4863,8.8462,8.4655,8.3434,8.9589,9.0384,9.5106,9.762,9.3149,9.3431,9.767,9.6124,9.5578,9.2351,8.9406,8.4145,8.7534,9.2223,9.4714,9.6232,9.8939,10.7753,10.4382,10.6443,10.8666,11.2986,11.2028,11.0828,10.7491,10.5024,11.1517,11.1633,11.1643,11.2781,11.2813,11.4694,11.3265,10.7909,11.0005,11.3492,11.7426,11.8458,11.5942,11.7768,11.003,10.743,10.6521,10.7531,10.7589,11.4672,10.3014,9.9706,9.748,9.6929,9.3925,9.9201,10.0589,10.0897,10.0381,10.2077,10.5076,10.62,10.3207,10.0454,9.9482,9.7798,10.1213,9.6443,9.7009,9.5563,9.6326,9.7475,9.4404,9.5947,9.5687,9.454,9.3318,9.0999,8.7617,7.861,8.0623,7.3327,7.5554,7.3462,6.7032,6.4127,6.0234,5.8082,5.6878,5.4644,4.8549]

function setup() {
  createCanvas(1000, 1000);
  
  button = createButton("USA");
  button.mouseClicked(function() {
    playSynth(data_usa);
  });
  button.size(150,100);
  button.position(10,10);
  button.style("font-size", "48px");
  
  button = createButton("Canada");
  button.mouseClicked(function() {
    playSynth(data_canada);
  });
  button.size(150,100);
  button.position(200,10);
  button.style("font-size", "38px");
  
  button = createButton("UK");
  button.mouseClicked(function() {
    playSynth(data_uk);
  });
  button.size(150,100);
  button.position(390,10);
  button.style("font-size", "48px");
  
  // button = createButton("Germany");
  // button.mouseClicked(function() {
  //   playSynth(data_germany);
  // });
  // button.size(150,100);
  // button.position(580,10);
  // button.style("font-size", "32px");
  
  //Polysynth
  polySynth = new p5.PolySynth();
}

function playSynth(data) {
  let time = 0;
  for (x in data) {
    polySynth.play(
      data[x]**2.25, //frequency in hz
      0.75, //note velocity 0-1
      time += 1/3, // time from now (in seconds) to start
      data[x]/10 // duration in seconds
    );
  }
}

function draw() {
  // background(220);
}